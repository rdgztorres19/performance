import{r,j as F,cN as N,l as z,b as s,cO as H,H as L,i as O}from"./index-XELHM88S.js";const B=["[&_.cm-editor]:bg-transparent","[&_.cm-editor]:border-transparent","[&_.cm-scroller]:font-mono","[&_.cm-scroller]:border-transparent","[&_.cm-activeLine]:bg-transparent","[&_.cm-activeLineGutter]:bg-transparent","[&_.cm-gutters]:bg-grey-75 dark:[&_.cm-gutters]:bg-grey-950","[&_.cm-gutters]:text-grey-600 dark:[&_.cm-gutters]:text-grey-500","[&_.cm-gutters]:border-grey-500 dark:[&_.cm-gutters]:border-grey-800","[&_.cm-cursor]:border-grey-900 dark:[&_.cm-cursor]:border-grey-75","dark:[&_.cm-tooltip-autocomplete.cm-tooltip_ul_li:not([aria-selected])]:bg-grey-975"].join(" "),G=r.forwardRef(function({title:o,value:g,height:t="200px",error:c,hint:a,clearBg:b=!0,extensions:n,onChange:f,onFocus:l,onBlur:d,className:x,...p},_){const y=r.useId(),u=r.useRef(null),[v,h]=r.useState(100),[i,j]=F.useState(null),[w,E]=r.useState({crosshairCursor:!1}),{setFocusState:m}=N(),R=e=>{l?.(e),m(!0)},k=e=>{d?.(e),m(!1)};r.useEffect(()=>{Promise.all(n).then(j),E(e=>({setup:e,searchKeymap:!1}))},[n]),r.useEffect(()=>{const e=new ResizeObserver(([S])=>{h(S.contentRect.width)});return e.observe(u.current),()=>e.disconnect()},[]);const C=z("peer order-2 w-full max-w-full overflow-hidden rounded-sm border",b?"bg-transparent":"bg-grey-75",c?"border-red":"border-grey-500 dark:border-grey-800",o&&"mt-2",t==="full"&&"h-full",B,x);return s.jsxs(s.Fragment,{children:[s.jsx("div",{ref:u}),i&&s.jsxs("div",{className:t==="full"?"h-full":"",style:{width:v},children:[s.jsx(H,{ref:_,basicSetup:w,className:C,extensions:i,height:t==="full"?"100%":t,value:g,onBlur:k,onChange:f,onFocus:R,...p}),o&&s.jsx(L,{className:"order-1 !text-grey-700 peer-focus:!text-black",htmlFor:y,useLabelTag:!0,children:o}),a&&s.jsx(O,{className:"order-3",color:c?"red":"",children:a})]})]})});export{G as default};
